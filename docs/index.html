<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title></title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/simplex.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.0.13/css/fa-svg-with-js.css" rel="stylesheet" />
<script src="site_libs/font-awesome-5.0.13/js/fontawesome-all.min.js"></script>
<script src="site_libs/font-awesome-5.0.13/js/fa-v4-shims.min.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 41px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 46px;
  margin-top: -46px;
}

.section h2 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h3 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h4 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h5 {
  padding-top: 46px;
  margin-top: -46px;
}
.section h6 {
  padding-top: 46px;
  margin-top: -46px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">R Data Science Final Project</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/adammwilson/RDataScience">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">




</div>


<p>library(rmarkdown) library(knitr) — #Data Science Project #Sean Konovitz #Crime and Census Attributes in Buffalo, New York<br />
—</p>
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>I will be combining crime data using an API from Open Data Buffalo and census data using the census API. The crime data is a daily updated dataset of crime incidents within the city of Buffalo provided by the Buffalo Police Department. This dataset includes the type of incident, such as theft and assault, as well as the time, date, and coordinates. The census data is using American Community Survey (ACS)five-year estimates at the census tract geography level.</p>
</div>
<div id="materials-and-methods" class="section level1">
<h1>Materials and methods</h1>
<ol style="list-style-type: decimal">
<li>For the crime data, the package RSocrata was used to read the data from Open Data Buffalo into R, as Open Data Buffalo is a website “powered by” Socrata. Socrata is a software company that forms partnerships with governments, such as Buffalo’s in 2017 to provide accessible data. In order to open it with the RSocrata package in R, one has to create an account with the site and aquire an app token. This token, along with the username, password and api link are utilized with the function read.socrata() to get it available in R. In this case, it is the crime incidents dataset. As far as geography, spatial data with the 79 census tracts in Buffalo was obtained as well from Open Data Buffalo. To read this into R, the function read_sf() was used to read the Buffalo tracts data.</li>
</ol>
<pre><code>load(&quot;data/buffcrime.Rda&quot;)
</code></pre>
<pre><code>buffalotracts&lt;- read_sf(&quot;data/geo_export_c9004500-af2b-4c4d-8cde-4de9d5831f2e.shp&quot;)
</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>For the census data, the packages tidycensus and tidyverse allowed for the data to be incorporated easily into R. First, one needs to obtain a census API key from <a href="https://api.census.gov/data/key_signup.html" class="uri">https://api.census.gov/data/key_signup.html</a>. Then, the key is put in the census_api_key() and Sys.getenv() functions.</li>
</ol>
<p>To get the data itself, the decision has to be made between the decennial, which is performed every ten years, or the Amercan Community Survey (ACS), which are five year estimates with a margin of error. I decided to go with the ACS, as it seemed to provide more variables that may be useful to the project.</p>
<p>To get the acs data, get_acs() is used and the state, county, geography, variables, and geometry. Since the study area is Buffalo, “NY” and “Erie” were used while “tract” was chosen as the geography since I felt it fits best with the census data. I could have went smaller, to census block groups, but with smaller populations the data may be less reliable. I chose median household income as the variable using the code “B19013_001”, since median income is a common measure used. I still change it to a different variable or incorporate an additional one.</p>
<pre><code>library(tidycensus)
library(tidyverse)

erie&lt;- get_acs(state = &quot;NY&quot;, county = &quot;Erie&quot;, geography = &quot;tract&quot;, 
                  variables = &quot;B19013_001&quot;, geometry = TRUE)
load(&quot;data/eriecensus.Rda&quot;)

                 </code></pre>
<ol start="3" style="list-style-type: decimal">
<li>To get just the census tracts for Buffalo and not all of Erie County, I merged the Buffalo tracts and the census data by “geoid10” and “GEOID”, which have the same values corresponding to census tract. By setting all.y=FALSE, that made it so only the 79 Buffalo tracts and their data remains.</li>
</ol>
<pre><code>
joined.tracts &lt;- merge(bufftract, erie, by.x = &quot;geoid10&quot;, by.y = &quot;GEOID&quot;,
                       all.y = FALSE)
load(&quot;data/joinedtracts.Rda&quot;)
</code></pre>
<ol start="4" style="list-style-type: decimal">
<li>Next is to enable the crime data to be used as points. This was done by using the st_as_sf() function with longitude(x) and latitude(y)as the coordinates(coords). The coordinate reference system (crs) was set to 4326.</li>
</ol>
<pre><code>crimepoints&lt;- st_as_sf(crime, coords=c(&quot;longitude&quot;, &quot;latitude&quot;),
                         crs= 4326)
load(&quot;data/crimepoints.Rda&quot;)
</code></pre>
</div>
<div id="results" class="section level1">
<h1>Results</h1>
<p>Still to be determined.</p>
</div>
<div id="conclusions" class="section level1">
<h1>Conclusions</h1>
<p>To be determined from the results</p>
</div>
<div id="references" class="section level1">
<h1>References</h1>
<p><a href="https://data.buffalony.gov/resource/d6g9-xbgu.json" class="uri">https://data.buffalony.gov/resource/d6g9-xbgu.json</a></p>
<p><a href="https://data.buffalony.gov/d/ts8p-7v76?category=Government&amp;view_name=U-S-Census-Tracts-in-BuffaloOpens" class="uri">https://data.buffalony.gov/d/ts8p-7v76?category=Government&amp;view_name=U-S-Census-Tracts-in-BuffaloOpens</a> in new window.</p>
<p><a href="https://walkerke.github.io/tidycensus/articles/spatial-data.html" class="uri">https://walkerke.github.io/tidycensus/articles/spatial-data.html</a></p>
</div>

<!-- give the footer some space -->
<br/>
<br/>

<footer id="site-footer">
  <div id="footer1">
  This website is a project for Adam Wilson's <a href="http://www.adamwilson.us/RDataScience"><i> Spatial Data Science (GEO503) </i></a>Course at the University at Buffalo
  </div>
  <div id="footer2">
  <a rel="license" property="http://creativecommons.org/ns#license"
  href="http://creativecommons.org/licenses/by/4.0/" ><img src="img/cc-by.svg" alt="cc-by"/></a> 
  </div>
</footer>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>


</body>
</html>
